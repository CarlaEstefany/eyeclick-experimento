const translations = {
  pt: {
    // P√°gina inicial
    play: "‚ñ∂ Iniciar",
    slogan: "Seu olhar √© um novo click!",
    logo: "EyeClick",
    logo_daltonic: "EyeClick",
    themes: {
      light: "üåû Claro",
      dark: "üåô Escuro",
      daltonic: "üëì Dalt√¥nico"
    },

    // Tutorial - Movimenta√ß√£o
    movement_title: "Movimenta√ß√£o",
    caption_up: "Feche o olho esquerdo<br>olhe para cima<br>com o direito para subir.",
    caption_down: "Feche o olho esquerdo<br>olhe para baixo<br>com o direito para descer.",
    caption_left: "Feche o olho esquerdo<br>olhe para a esquerda<br>com o direito para ir √† esquerda.",
    caption_right: "Feche o olho esquerdo<br>olhe para a direita<br>com o direito para ir √† direita.",

    // Tutorial - A√ß√µes
    actions_title: "A√ß√µes",
    caption_left_click: "Feche o olho esquerdo<br>olhe √† esquerda<br>com o direito para clicar √† esquerda.",
    caption_right_click: "Feche o olho esquerdo<br>olhe √† direita<br>com o direito para clicar √† direita.",
    caption_scroll_up: "Feche o olho esquerdo<br>olhe para cima<br>com o direito para rolar para cima.",
    caption_scroll_down: "Feche o olho esquerdo<br>olhe para baixo<br>com o direito para rolar para baixo.",

    // Bot√£o de pr√≥ximo
    next_button: "Pr√≥ximo ‚ñ∂",
    prev_button: "‚óÄ Anterior",

    // Tutorial - Calibra√ß√£o
    calibration_title: "Calibra√ß√£o",
    calibration_steps: [
      "Etapa 1: Dist√¢ncia da c√¢mera, fique apenas parado com os olhos abertos.",
      "Etapa 2: Captura dos olhos abertos e depois fechados.",
      "Etapa 3: Mapeamento de dire√ß√µes, olhe para cada bolinha indicada e clique no bot√£o de tirar foto."
    ],
    start_calibration: "‚ñ∂ Iniciar Calibra√ß√£o",

    // calibracao 

    step1Title: "Etapa 1: Dist√¢ncia da c√¢mera",
    captureBtn1Text: "Capturar",
    step2Title: "Etapa 2: Propor√ß√£o dos olhos",
    captureOpenText: "Capturar olhos abertos",
    captureClosedText: "Capturar olhos fechados",
    step3Title: "Etapa 3: Mapeamento de dire√ß√µes",
    captureBtn3Text: "Capturar",
    step4Title: "Etapa 4: Teste final",
    finalizarBtnText: "Finalizar calibra√ß√£o",
    repetirBtnText: "Repetir calibra√ß√£o",

    feedback_no_face: "Rosto n√£o detectado.", feedback_distance_ok: "Dist√¢ncia OK ‚úÖ", feedback_distance_close: "Aproxime-se mais da c√¢mera.",
    feedback_no_face: "Rosto n√£o detectado.", feedback_open_ok: "Olhos abertos capturados ‚úÖ", feedback_closed_ok: "Olhos fechados capturados ‚úÖ",
    feedback_fix_gaze: "Fixe o olhar aqui e aperte Capturar",
    // video 360
    instructionsTitle: "Instru√ß√µes",
    text_down: "Baixo", 
    text_up: "Cima", 
    text_right: "Direita", 
    text_left: "Esquerda",
    text_zoom_out: "Zoom -", 
    text_zoom_in: "Zoom +",
    soundText: "Clique 2 vezes para ativar o som",

    play: "‚ñ∂ Iniciar", 
    instruction_move_ball: "Mova a bolinha para dentro dos quadrados vermelhos", 
    next_button_experiment: "Pr√≥xima Etapa",

    resultsTitle: "Resultados do Experimento",
    resultsText: "Copie e cole os valores abaixo no formul√°rio:",
    next_button_results: "Ir para Agradecimentos",


    // conversa√ß√£o - cbord
    text_click_left: "Clique esquerdo",

    introTitle: "üëÅÔ∏è Simula√ß√£o de Conversa",
    introText: "Voc√™ vai usar o EyeClick para escolher respostas e conversar com nossa assistente.",
    startButton: "Come√ßar",

    fala1: "Ol√°, tudo bem?",
    resp1a: "Ol√°, sim",
    resp1b: "Ol√°, n√£o",
    resp1c: "Estou cansado",
    resp1d: "Prefiro n√£o responder",

    fala2: "Posso te ajudar em algo?",
    resp2a: "Quero comer",
    resp2b: "Estou com sede",
    resp2c: "Estou com dor",

    fala3: "Ok, j√° volto!",
    endTitle: "Fim da conversa",
    endText: "Obrigado por participar da simula√ß√£o.",
    nextButton: "Pr√≥ximo ‚ñ∂",

    // agradecimentos
    thanksTitle: "Agradecimentos",
    thanksText: "Este projeto foi desenvolvido por Carla Estefany Caetano Silva, aluna de mestrado, sob orienta√ß√£o das professoras D√©bora Christina Muchaluart Saade e Daniela Gorski Trevisan.",

  },

  en: {
    play: "‚ñ∂ Start",
    slogan: "Your gaze is a new click!",
    logo: "EyeClick",
    logo_daltonic: "EyeClick",
    themes: {
      light: "üåû Light",
      dark: "üåô Dark",
      daltonic: "üëì Daltonic"
    },
    movement_title: "Movement",
    caption_up: "Close left eye<br>look up<br>with right eye to move up.",
    caption_down: "Close left eye<br>look down<br>with right eye to move down.",
    caption_left: "Close left eye<br>look left<br>with right eye to move left.",
    caption_right: "Close left eye<br>look right<br>with right eye to move right.",
    actions_title: "Actions",
    caption_left_click: "Close left eye<br>look left<br>with right eye to left-click.",
    caption_right_click: "Close left eye<br>look right<br>with right eye to right-click.",
    caption_scroll_up: "Close left eye<br>look up<br>with right eye to scroll up.",
    caption_scroll_down: "Close left eye<br>look down<br>with right eye to scroll down.",
    next_button: "Next ‚ñ∂",
    prev_button: "‚óÄ Previous",
    calibration_title: "Calibration",
    calibration_steps: [
      "Step 1: Camera distance, stay still with eyes open.",
      "Step 2: Capture eyes open and then closed.",
      "Step 3: Mapping directions, look at each dot indicated and click the photo button."
    ],
    start_calibration: "‚ñ∂ Start Calibration",

    step1Title: "Step 1: Camera distance",
    captureBtn1Text: "Capture",
    step2Title: "Step 2: Eye proportion",
    captureOpenText: "Capture eyes open",
    captureClosedText: "Capture eyes closed",
    step3Title: "Step 3: Direction mapping",
    captureBtn3Text: "Capture",
    step4Title: "Step 4: Final test",
    finalizarBtnText: "Finish calibration",
    repetirBtnText: "Repeat calibration",

    feedback_no_face: "Face not detected.", feedback_distance_ok: "Distance OK ‚úÖ", feedback_distance_close: "Move closer to the camera.",
    feedback_no_face: "Face not detected.", feedback_open_ok: "Eyes open captured ‚úÖ", feedback_closed_ok: "Eyes closed captured ‚úÖ",
    feedback_fix_gaze: "Fix your gaze here and press Capture",

    instructionsTitle: "Instructions",
    text_down: "Down",
    text_up: "Up",
    text_right: "Right",
    text_left: "Left",
    text_zoom_out: "Zoom Out", 
    text_zoom_in: "Zoom In",
    soundText: "Click twice to enable sound",

    play: "‚ñ∂ Start", 
    instruction_move_ball: "Move the ball into the red squares", 
    next_button_experiment: "Next Step",

    resultsTitle: "Experiment Results", 
    resultsText: "Copy and paste the values below into the form:", 
    next_button_results: "Go to Acknowledgments",

    text_click_left: "Left click",

    introTitle: "üëÅÔ∏è Conversation Simulation",
    introText: "You will use EyeClick to choose answers and talk with our assistant.",
    startButton: "Start",

    fala1: "Hello, how are you?",
    resp1a: "Hello, I fine",
    resp1b: "Hello, I'm no well",
    resp1c: "I am tired",
    resp1d: "I prefer not to answer",

    fala2: "Can I help you with something?",
    resp2a: "I want to eat",
    resp2b: "I am thirsty",
    resp2c: "I am in pain",

    fala3: "Okay, I'll be right back!",
    endTitle: "End of conversation",
    endText: "Thank you for participating in the simulation.",
    nextButton: "Next ‚ñ∂",

    thanksTitle: "Acknowledgments",
    thanksText: "This project was developed by Carla Estefany Caetano Silva, master's student, under the guidance of Professors D√©bora Christina Muchaluart Saade and Daniela Gorski Trevisan.",

  },

  es: {
    play: "‚ñ∂ Iniciar",
    slogan: "¬°Tu mirada es un nuevo clic!",
    logo: "EyeClick",
    logo_daltonic: "EyeClick",
    themes: {
      light: "üåû Claro",
      dark: "üåô Oscuro",
      daltonic: "üëì Dalt√≥nico"
    },
    movement_title: "Movimiento",
    caption_up: "Cierra el ojo izquierdo<br>mira arriba<br>con el derecho para subir.",
    caption_down: "Cierra el ojo izquierdo<br>mira abajo<br>con el derecho para bajar.",
    caption_left: "Cierra el ojo izquierdo<br>mira a la izquierda<br>con el derecho para ir a la izquierda.",
    caption_right: "Cierra el ojo izquierdo<br>mira a la derecha<br>con el derecho para ir a la derecha.",
    actions_title: "Acciones",
    caption_left_click: "Cierra el ojo izquierdo<br>mira a la izquierda<br>con el derecho para clic izquierdo.",
    caption_right_click: "Cierra el ojo izquierdo<br>mira a la derecha<br>con el derecho para clic derecho.",
    caption_scroll_up: "Cierra el ojo izquierdo<br>mira arriba<br>con el derecho para desplazar arriba.",
    caption_scroll_down: "Cierra el ojo izquierdo<br>mira abajo<br>con el derecho para desplazar abajo.",
    next_button: "Siguiente ‚ñ∂",
    prev_button:"‚óÄ Anterior",
    calibration_title: "Calibraci√≥n",
    calibration_steps: [
      "Etapa 1: Distancia de la c√°mara, qu√©date quieto con los ojos abiertos.",
      "Etapa 2: Captura de ojos abiertos y luego cerrados.",
      "Etapa 3: Mapeo de direcciones, mira cada punto indicado y pulsa el bot√≥n de foto."
    ],
    start_calibration: "‚ñ∂ Iniciar Calibraci√≥n",
    
    step1Title: "Etapa 1: Distancia de la c√°mara",
    captureBtn1Text: "Capturar",
    step2Title: "Etapa 2: Proporci√≥n de los ojos",
    captureOpenText: "Capturar ojos abiertos",
    captureClosedText: "Capturar ojos cerrados",
    step3Title: "Etapa 3: Mapeo de direcciones",
    captureBtn3Text: "Capturar",
    step4Title: "Etapa 4: Prueba final",
    finalizarBtnText: "Finalizar calibraci√≥n",
    repetirBtnText: "Repetir calibraci√≥n",

    feedback_no_face: "Rostro no detectado.", feedback_distance_ok: "Distancia OK ‚úÖ", feedback_distance_close: "Ac√©rcate m√°s a la c√°mara.",
    feedback_no_face: "Rostro no detectado.", feedback_open_ok: "Ojos abiertos capturados ‚úÖ", feedback_closed_ok: "Ojos cerrados capturados ‚úÖ",
    feedback_fix_gaze: "Fija la mirada aqu√≠ y pulsa Capturar",

    instructionsTitle: "Instrucciones",
    text_down: "Abajo",
    text_up: "Arriba",
    text_right: "Derecha",
    text_left: "Izquierda",
    text_zoom_out: "Alejar", 
    text_zoom_in: "Acercar",
    soundText: "Haz 2 clic para activar el sonido",

    play: "‚ñ∂ Iniciar", 
    instruction_move_ball: "Mueve la bolita dentro de los cuadrados rojos", 
    next_button_experiment: "Siguiente Etapa",

    resultsTitle: "Resultados del Experimento", 
    resultsText: "Copia y pega los valores abajo en el formulario:", 
    next_button_results: "Ir a Agradecimientos",

    text_click_left: "Clic izquierdo",

    introTitle: "üëÅÔ∏è Simulaci√≥n de Conversaci√≥n",
    introText: "Usar√°s EyeClick para elegir respuestas y conversar con nuestra asistente.",
    startButton: "Comenzar",

    fala1: "Hola, ¬øtodo bien?",
    resp1a: "Hola, s√≠",
    resp1b: "Hola, no",
    resp1c: "Estoy cansado",
    resp1d: "Prefiero no responder",

    fala2: "¬øPuedo ayudarte en algo?",
    resp2a: "Quiero comer",
    resp2b: "Tengo sed",
    resp2c: "Me duele",

    fala3: "¬°Vale, ya vuelvo!",
    endTitle: "Fin de la conversaci√≥n",
    endText: "Gracias por participar en la simulaci√≥n.",
    nextButton: "Siguiente ‚ñ∂",

    thanksTitle: "Agradecimientos",
    thanksText: "Este proyecto fue desarrollado por Carla Estefany Caetano Silva, estudiante de maestr√≠a, bajo la orientaci√≥n de las profesoras D√©bora Christina Muchaluart Saade y Daniela Gorski Trevisan.",

  }
};

// Atualiza textos gerais (index)
function updateTexts(lang) {
  if (document.getElementById('playBtn')) {
    document.getElementById('playBtn').textContent = translations[lang].play;
  }
  if (document.getElementById('slogan')) {
    document.getElementById('slogan').textContent = translations[lang].slogan;
  }

  const themeSelect = document.getElementById('theme');
  if (themeSelect) {
    themeSelect.options[0].text = translations[lang].themes.light;
    themeSelect.options[1].text = translations[lang].themes.dark;
    themeSelect.options[2].text = translations[lang].themes.daltonic;
  }

  const logoEl = document.getElementById('logoTitle');
  if (logoEl) {
    const currentTheme = document.body.className;
    logoEl.textContent = currentTheme === "daltonic"
      ? translations[lang].logo_daltonic
      : translations[lang].logo;
  }

  updateTutorialTexts(lang);
}

// Atualiza textos do tutorial
function updateTutorialTexts(lang) {
  // Movimenta√ß√£o
  if (document.getElementById('movementTitle')) {
    document.getElementById('movementTitle').textContent = translations[lang].movement_title;
  }
  if (document.getElementById('caption_up')) {
    document.getElementById('caption_up').innerHTML = translations[lang].caption_up;
  }
  if (document.getElementById('caption_down')) {
    document.getElementById('caption_down').innerHTML = translations[lang].caption_down;
  }
  if (document.getElementById('caption_left')) {
    document.getElementById('caption_left').innerHTML = translations[lang].caption_left;
  }
  if (document.getElementById('caption_right')) {
    document.getElementById('caption_right').innerHTML = translations[lang].caption_right;
  }
  if (document.getElementById('nextBtn')) {
    document.getElementById('nextBtn').textContent = translations[lang].next_button;
  }

  // A√ß√µes
  if (document.getElementById('actionsTitle')) {
    document.getElementById('actionsTitle').textContent = translations[lang].actions_title;
  }
  if (document.getElementById('caption_left_click')) {
    document.getElementById('caption_left_click').innerHTML = translations[lang].caption_left_click;
  }
  if (document.getElementById('caption_right_click')) {
    document.getElementById('caption_right_click').innerHTML = translations[lang].caption_right_click;
  }
  if (document.getElementById('caption_scroll_up')) {
    document.getElementById('caption_scroll_up').innerHTML = translations[lang].caption_scroll_up;
  }
  if (document.getElementById('caption_scroll_down')) {
    document.getElementById('caption_scroll_down').innerHTML = translations[lang].caption_scroll_down;
  }
  if (document.getElementById('nextBtn2')) {
    document.getElementById('nextBtn2').textContent = translations[lang].next_button;
  }
  if (document.getElementById('prevBtn')) {
  document.getElementById('prevBtn').textContent = translations[lang].prev_button;
  }


  // Calibra√ß√£o - tutorial
  if (document.getElementById('calibrationTitle')) {
    document.getElementById('calibrationTitle').textContent = translations[lang].calibration_title;
  }

  if (document.getElementById('calibrationList')) {
    const list = document.getElementById('calibrationList');
    list.innerHTML = ""; // limpa antes de preencher
    translations[lang].calibration_steps.forEach(step => {
      const li = document.createElement('li');
      li.innerHTML = step;
      list.appendChild(li);
    });
  }

  if (document.getElementById('startCalibrationBtn')) {
    document.getElementById('startCalibrationBtn').textContent = translations[lang].start_calibration;
  }

  // ----calibra√ß√£o sess√£o----

  // Calibra√ß√£o - Etapa 1
  if (document.getElementById('step1Title')) {
    document.getElementById('step1Title').textContent = translations[lang].step1Title;
  }
  if (document.getElementById('captureBtn1Text')) {
    document.getElementById('captureBtn1Text').textContent = translations[lang].captureBtn1Text;
  }
  if (document.getElementById('nextBtn1Text')) {
    document.getElementById('nextBtn1Text').textContent = translations[lang].next_button;
  }

  // Calibra√ß√£o - Etapa 2
  if (document.getElementById('step2Title')) {
    document.getElementById('step2Title').textContent = translations[lang].step2Title;
  }
  if (document.getElementById('captureOpenText')) {
    document.getElementById('captureOpenText').textContent = translations[lang].captureOpenText;
  }
  if (document.getElementById('captureClosedText')) {
    document.getElementById('captureClosedText').textContent = translations[lang].captureClosedText;
  }
  if (document.getElementById('nextBtn2Text')) {
    document.getElementById('nextBtn2Text').textContent = translations[lang].next_button;
  }

  // Calibra√ß√£o - Etapa 3
  if (document.getElementById('step3Title')) {
    document.getElementById('step3Title').textContent = translations[lang].step3Title;
  }
  if (document.getElementById('captureBtn3Text')) {
    document.getElementById('captureBtn3Text').textContent = translations[lang].captureBtn3Text;
  }
  if (document.getElementById('nextBtn3Text')) {
    document.getElementById('nextBtn3Text').textContent = translations[lang].next_button;
  }

  // Calibra√ß√£o - Etapa 4
  if (document.getElementById('step4Title')) {
    document.getElementById('step4Title').textContent = translations[lang].step4Title;
  }
  if (document.getElementById('finalizarBtnText')) {
    document.getElementById('finalizarBtnText').textContent = translations[lang].finalizarBtnText;
  }
  if (document.getElementById('repetirBtnText')) {
    document.getElementById('repetirBtnText').textContent = translations[lang].repetirBtnText;
  }

  // Calibra√ß√£o - Feedbacks
  if (document.getElementById('feedback1')) {
    document.getElementById('feedback1').textContent = translations[lang].feedback_no_face;
  }
  if (document.getElementById('feedbackOpen')) {
    document.getElementById('feedbackOpen').textContent = translations[lang].feedback_open_ok;
  }
  if (document.getElementById('feedbackClosed')) {
    document.getElementById('feedbackClosed').textContent = translations[lang].feedback_closed_ok;
  }
  // Etapa 3 - instru√ß√£o da bolinha
  // (esse n√£o √© um elemento HTML, √© desenhado no canvas, ent√£o n√£o precisa de if aqui.
  // Ele j√° est√° sendo usado direto na fun√ß√£o loopBolinhaEtapa3 com translations[lang].feedback_fix_gaze)


  function updateResultsTexts(lang) {
  if (document.getElementById('resultsTitle')) {
    document.getElementById('resultsTitle').textContent = translations[lang].resultsTitle;
  }
  if (document.getElementById('resultsText')) {
    document.getElementById('resultsText').textContent = translations[lang].resultsText;
  }
  if (document.getElementById('nextButton')) {
    document.getElementById('nextButton').textContent = translations[lang].next_button_results;
  }
}


  // video 360
  if (document.getElementById('text_down')) {
  document.getElementById('text_down').textContent = translations[lang].text_down;
  }
  if (document.getElementById('text_up')) {
    document.getElementById('text_up').textContent = translations[lang].text_up;
  }
  if (document.getElementById('text_right')) {
    document.getElementById('text_right').textContent = translations[lang].text_right;
  }
  if (document.getElementById('text_left')) {
    document.getElementById('text_left').textContent = translations[lang].text_left;
  }
  if (document.getElementById('text_zoom_out')) {
  document.getElementById('text_zoom_out').textContent = translations[lang].text_zoom_out;
  }
  if (document.getElementById('text_zoom_in')) {
    document.getElementById('text_zoom_in').textContent = translations[lang].text_zoom_in;
  }
  if (document.getElementById('soundText')) {
  document.getElementById('soundText').textContent = translations[lang].soundText;
  }
  if (document.getElementById('instructionsTitle')) {
  document.getElementById('instructionsTitle').textContent = translations[lang].instructionsTitle;
  }

  if (document.getElementById('nextBtnVideo')) {
    document.getElementById('nextBtnVideo').textContent = translations[lang].text_click_left;
  }
  if (document.getElementById('text_click_left')) {
    document.getElementById('text_click_left').textContent = translations[lang].text_click_left;
  }
  // Conversa - CBord
  if (document.getElementById('introTitle')) {
    document.getElementById('introTitle').textContent = translations[lang].introTitle;
  }
  if (document.getElementById('introText')) {
    document.getElementById('introText').textContent = translations[lang].introText;
  }
  if (document.getElementById('startButton')) {
    document.getElementById('startButton').textContent = translations[lang].startButton;
  }

  if (document.getElementById('fala1')) {
    document.getElementById('fala1').textContent = translations[lang].fala1;
  }
  if (document.getElementById('resp1a')) {
    document.getElementById('resp1a').textContent = translations[lang].resp1a;
  }
  if (document.getElementById('resp1b')) {
    document.getElementById('resp1b').textContent = translations[lang].resp1b;
  }
  if (document.getElementById('resp1c')) {
    document.getElementById('resp1c').textContent = translations[lang].resp1c;
  }
  if (document.getElementById('resp1d')) {
    document.getElementById('resp1d').textContent = translations[lang].resp1d;
  }

  if (document.getElementById('fala2')) {
    document.getElementById('fala2').textContent = translations[lang].fala2;
  }
  if (document.getElementById('resp2a')) {
    document.getElementById('resp2a').textContent = translations[lang].resp2a;
  }
  if (document.getElementById('resp2b')) {
    document.getElementById('resp2b').textContent = translations[lang].resp2b;
  }
  if (document.getElementById('resp2c')) {
    document.getElementById('resp2c').textContent = translations[lang].resp2c;
  }

  if (document.getElementById('fala3')) {
    document.getElementById('fala3').textContent = translations[lang].fala3;
  }
  if (document.getElementById('endTitle')) {
    document.getElementById('endTitle').textContent = translations[lang].endTitle;
  }
  if (document.getElementById('endText')) {
    document.getElementById('endText').textContent = translations[lang].endText;
  }
  if (document.getElementById('nextBtnVideo')) {
    document.getElementById('nextBtnVideo').textContent = translations[lang].next_button;
  }
  // P√°gina de agradecimentos
  if (document.getElementById('thanksTitle')) {
    document.getElementById('thanksTitle').textContent = translations[lang].thanksTitle;
  }
  if (document.getElementById('thanksText')) {
    document.getElementById('thanksText').textContent = translations[lang].thanksText;
  }
  if (document.getElementById('nextBtnThanks')) {
    document.getElementById('nextBtnThanks').textContent = translations[lang].next_button;
  }


}

/* ===== Inicializa√ß√£o ===== */
document.addEventListener('DOMContentLoaded', function () {
  // pega valores salvos ou usa padr√£o
  const savedLang = localStorage.getItem('selectedLanguage') || 'pt';
  const savedTheme = localStorage.getItem('selectedTheme') || 'light';

  // aplica nos selects
  const languageSelect = document.getElementById('language');
  if (languageSelect) languageSelect.value = savedLang;

  const themeSelect = document.getElementById('theme');
  if (themeSelect) themeSelect.value = savedTheme;

  // aplica no body e atualiza textos
  document.body.className = savedTheme;
  updateTexts(savedLang);

  // salva quando mudar idioma
  if (languageSelect) {
    languageSelect.addEventListener('change', function () {
      localStorage.setItem('selectedLanguage', this.value);
      updateTexts(this.value);
    });
  }

  // salva quando mudar tema
  if (themeSelect) {
    themeSelect.addEventListener('change', function () {
      localStorage.setItem('selectedTheme', this.value);
      document.body.className = this.value;
      const lang = document.getElementById('language')?.value || 'pt';
      updateTexts(lang);
    });
  }
});
